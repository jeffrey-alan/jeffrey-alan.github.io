<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MQTT入门介绍</title>
    <url>/2019/12/11/MQTT%E5%85%A5%E9%97%A8%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<h1 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h1><p>MQTT（Message Queuing Telemetry Transport，消息队列遥测传输协议），是一种基于发布/订阅（publish/subscribe）模式的”轻量级”通讯协议，该协议构建于TCP/IP协议上，由IBM在1999年发布。MQTT最大优点在于，可以以极少的代码和有限的带宽，为连接远程设备提供实时可靠的消息服务。作为一种低开销、低带宽占用的即时通讯协议，使其在物联网、小型设备、移动应用等方面有较广泛的应用。MQTT是一个基于客户端-服务器的消息发布/订阅传输协议。</p>
<a id="more"></a>

<p>MQTT协议是轻量、简单、开放和易于实现的，这些特点使它适用范围非常广泛。在很多情况下，包括受限的环境中，如：机器与机器（M2M）通信和物联网（IoT）。其在，通过卫星链路通信传感器、偶尔拨号的医疗设备、智能家居、及一些小型化设备中已广泛使用。</p>
<p><img src="http://tc.llx-cn.com/20191211162544.png" alt="20191211162544"></p>
<h1 id="设计规范"><a href="#设计规范" class="headerlink" title="设计规范"></a>设计规范</h1><p>由于物联网的环境是非常特别的，所以MQTT遵循以下设计原则：</p>
<ul>
<li>精简，不添加可有可无的功能；</li>
<li>发布/订阅（Pub/Sub）模式，方便消息在传感器之间传递；</li>
<li>允许用户动态创建主题，零运维成本；</li>
<li>把传输量降到最低以提高传输效率；</li>
<li>把低带宽、高延迟、不稳定的网络等因素考虑在内；</li>
<li>支持连续的会话控制；</li>
<li>理解客户端计算能力可能很低；</li>
<li>提供服务质量管理；</li>
<li>假设数据不可知，不强求传输数据的类型与格式，保持灵活性。</li>
</ul>
<h1 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h1><p>MQTT协议工作在低带宽、不可靠的网络的远程传感器和控制设备通讯而设计的协议，它具有以下主要的几项特性：</p>
<ul>
<li>使用发布/订阅消息模式，提供一对多的消息发布，解除应用程序耦合。这一点很类似于XMPP，但是MQTT的信息冗余远小于XMPP，,因为XMPP使用XML格式文本来传递数据。</li>
<li>对负载内容屏蔽的消息传输。</li>
<li>使用TCP/IP提供网络连接。主流的MQTT是基于TCP连接进行数据推送的，但是同样有基于UDP的版本，叫做MQTT-SN。这两种版本由于基于不同的连接方式，优缺点自然也就各有不同了。</li>
<li>有三种消息发布服务质量：”至多一次”，消息发布完全依赖底层TCP/IP网络。会发生消息丢失或重复。这一级别可用于如下情况，环境传感器数据，丢失一次读记录无所谓，因为不久后还会有第二次发送。这一种方式主要普通APP的推送，倘若你的智能设备在消息推送时未联网，推送过去没收到，再次联网也就收不到了。”至少一次”，确保消息到达，但消息重复可能会发生。”只有一次”，确保消息到达一次。在一些要求比较严格的计费系统中，可以使用此级别。在计费系统中，消息重复或丢失会导致不正确的结果。这种最高质量的消息发布服务还可以用于即时通讯类的APP的推送，确保用户收到且只会收到一次。</li>
<li>小型传输，开销很小（固定长度的头部是2字节），协议交换最小化，以降低网络流量。这就是为什么在介绍里说它非常适合”在物联网领域，传感器与服务器的通信，信息的收集”，要知道嵌入式设备的运算能力和带宽都相对薄弱，使用这种协议来传递消息再适合不过了。</li>
<li>使用Last Will和Testament特性通知有关各方客户端异常中断的机制。Last Will：即遗言机制，用于通知同一主题下的其他设备发送遗言的设备已经断开了连接。Testament：遗嘱机制，功能类似于Last Will。</li>
</ul>
<h1 id="MQTT协议原理"><a href="#MQTT协议原理" class="headerlink" title="MQTT协议原理"></a>MQTT协议原理</h1><p>实现MQTT协议需要客户端和服务器端通讯完成，在通讯过程中，MQTT协议中有三种身份：发布者（Publish）、代理（Broker）（服务器）、订阅者（Subscribe）。其中，消息的发布者和订阅者都是客户端，消息代理是服务器，消息发布者可以同时是订阅者。MQTT传输的消息分为：主题（Topic）和负载（payload）两部分：</p>
<ul>
<li>Topic，可以理解为消息的类型，订阅者订阅（Subscribe）后，就会收到该主题的消息内容（payload）；</li>
<li>payload，可以理解为消息的内容，是指订阅者具体要使用的内容。</li>
</ul>
<h2 id="MQTT协议实现方式"><a href="#MQTT协议实现方式" class="headerlink" title="MQTT协议实现方式"></a>MQTT协议实现方式</h2><h2 id="网络传输与应用消息"><a href="#网络传输与应用消息" class="headerlink" title="网络传输与应用消息"></a>网络传输与应用消息</h2><p>MQTT会构建底层网络传输：它将建立客户端到服务器的连接，提供两者之间的一个有序的、无损的、基于字节流的双向传输。当应用数据通过MQTT网络发送时，MQTT会把与之相关的服务质量（QoS）和主题名（Topic）相关连。</p>
<h2 id="MQTT客户端"><a href="#MQTT客户端" class="headerlink" title="MQTT客户端"></a>MQTT客户端</h2><p>一个使用MQTT协议的应用程序或者设备，它总是建立到服务器的网络连接。客户端可以：</p>
<ol>
<li>发布其他客户端可能会订阅的信息；</li>
<li>订阅其它客户端发布的消息；</li>
<li>退订或删除应用程序的消息；</li>
<li>断开与服务器连接。</li>
</ol>
<h2 id="MQTT服务器"><a href="#MQTT服务器" class="headerlink" title="MQTT服务器"></a>MQTT服务器</h2><p>MQTT服务器以称为”消息代理”（Broker），可以是一个应用程序或一台设备。它是位于消息发布者和订阅者之间，它可以：</p>
<ul>
<li>接受来自客户的网络连接；</li>
<li>接受客户发布的应用信息；</li>
<li>处理来自客户端的订阅和退订请求；</li>
<li>向订阅的客户转发应用程序消息。</li>
</ul>
<h2 id="MQTT协议中的订阅、主题、会话"><a href="#MQTT协议中的订阅、主题、会话" class="headerlink" title="MQTT协议中的订阅、主题、会话"></a>MQTT协议中的订阅、主题、会话</h2><ul>
<li>订阅（Subscription）订阅包含主题筛选器（Topic Filter）和最大服务质量（QoS）。订阅会与一个会话（Session）关联。一个会话可以包含多个订阅。每一个会话中的每个订阅都有一个不同的主题筛选器。</li>
<li>会话（Session）每个客户端与服务器建立连接后就是一个会话，客户端和服务器之间有状态交互。会话存在于一个网络之间，也可能在客户端和服务器之间跨越多个连续的网络连接。</li>
<li>主题名（Topic Name）连接到一个应用程序消息的标签，该标签与服务器的订阅相匹配。服务器会将消息发送给订阅所匹配标签的每个客户端。</li>
<li>主题筛选器（Topic Filter）一个对主题名通配符筛选器，在订阅表达式中使用，表示订阅所匹配到的多个主题。</li>
<li>负载（Payload）消息订阅者所具体接收的内容。</li>
</ul>
<h2 id="MQTT协议中的方法"><a href="#MQTT协议中的方法" class="headerlink" title="MQTT协议中的方法"></a>MQTT协议中的方法</h2><p>MQTT协议中定义了一些方法（也被称为动作），来于表示对确定资源所进行操作。这个资源可以代表预先存在的数据或动态生成数据，这取决于服务器的实现。通常来说，资源指服务器上的文件或输出。主要方法有：</p>
<ol>
<li>Connect。等待与服务器建立连接。</li>
<li>Disconnect。等待MQTT客户端完成所做的工作，并与服务器断开TCP/IP会话。</li>
<li>Subscribe。等待完成订阅。</li>
<li>UnSubscribe。等待服务器取消客户端的一个或多个topics订阅。</li>
<li>Publish。MQTT客户端发送消息请求，发送完成后返回应用程序线程。</li>
</ol>
<h1 id="MQTT协议数据包结构"><a href="#MQTT协议数据包结构" class="headerlink" title="MQTT协议数据包结构"></a>MQTT协议数据包结构</h1><p>在MQTT协议中，一个MQTT数据包由：固定头（Fixed header）、可变头（Variable header）、消息体（payload）三部分构成。MQTT数据包结构如下：</p>
<p>（1）固定头（Fixed header）。存在于所有MQTT数据包中，表示数据包类型及数据包的分组类标识。<br>（2）可变头（Variable header）。存在于部分MQTT数据包中，数据包类型决定了可变头是否存在及其具体内容。<br>（3）消息体（Payload）。存在于部分MQTT数据包中，表示客户端收到的具体内容。</p>
<h2 id="MQTT固定头"><a href="#MQTT固定头" class="headerlink" title="MQTT固定头"></a>MQTT固定头</h2><p>固定头存在于所有MQTT数据包中，其结构如下：</p>
<h3 id="MQTT数据包类型"><a href="#MQTT数据包类型" class="headerlink" title="MQTT数据包类型"></a>MQTT数据包类型</h3><p>位置：Byte 1中bits 7-4。<br>相于一个4位的无符号值，类型、取值及描述如下：</p>
<h3 id="标识位"><a href="#标识位" class="headerlink" title="标识位"></a>标识位</h3><p>位置：Byte 1中bits 3-0。</p>
<p>在不使用标识位的消息类型中，标识位被作为保留位。如果收到无效的标志时，接收端必须关闭网络连接：</p>
<ul>
<li>DUP：发布消息的副本。用来在保证消息的可靠传输，如果设置为1，则在下面的变长中增加MessageId，并且需要回复确认，以保证消息传输完成，但不能用于检测消息重复发送。</li>
<li>QoS：发布消息的服务质量，即：保证消息传递的次数</li>
<li>RETAIN： 发布保留标识，表示服务器要保留这次推送的信息，如果有新的订阅者出现，就把这消息推送给它，如果设有那么推送至当前订阅者后释放。 5.1.3 剩余长度（Remaining Length）</li>
</ul>
<h2 id="MQTT可变头"><a href="#MQTT可变头" class="headerlink" title="MQTT可变头"></a>MQTT可变头</h2><p>MQTT数据包中包含一个可变头，它驻位于固定的头和负载之间。可变头的内容因数据包类型而不同，较常的应用是作为包的标识：很多类型数据包中都包括一个2字节的数据包标识字段，这些类型的包有：PUBLISH (QoS &gt; 0)、PUBACK、PUBREC、PUBREL、PUBCOMP、SUBSCRIBE、SUBACK、UNSUBSCRIBE、UNSUBACK。</p>
<h2 id="Payload消息体"><a href="#Payload消息体" class="headerlink" title="Payload消息体"></a>Payload消息体</h2><p>Payload消息体位MQTT数据包的第三部分，包含CONNECT、SUBSCRIBE、SUBACK、UNSUBSCRIBE 四种类型的消息：</p>
<ul>
<li>CONNECT，消息体内容主要是：客户端的ClientID、订阅的Topic、Message以及用户名和密码。</li>
<li>SUBSCRIBE，消息体内容是一系列的要订阅的主题以及QoS。</li>
<li>SUBACK，消息体内容是服务器对于SUBSCRIBE所申请的主题及QoS进行确认和回复。</li>
<li>UNSUBSCRIBE，消息体内容是要订阅的主题。</li>
</ul>
]]></content>
      <categories>
        <category>MQTT</category>
        <category>协议</category>
      </categories>
      <tags>
        <tag>MQTT</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo使用总结</title>
    <url>/2019/12/09/Hexo%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h1><p>关于hexo的一些使用方法总结</p>
<a id="more"></a>


<h1 id="初次使用"><a href="#初次使用" class="headerlink" title="初次使用"></a>初次使用</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span></pre></td></tr><tr><td class="code"><pre><span class="line">hexo init blog</span></pre></td></tr><tr><td class="code"><pre><span class="line">cd blog</span></pre></td></tr><tr><td class="code"><pre><span class="line">npm install</span></pre></td></tr><tr><td class="code"><pre><span class="line">hexo server</span></pre></td></tr></table></figure>

<h1 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;hexo-theme-next themes&#x2F;next</span></pre></td></tr></table></figure>

<h2 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h2><h2 id="站点配置"><a href="#站点配置" class="headerlink" title="站点配置"></a>站点配置</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">theme: next</span></pre></td></tr></table></figure>

<h2 id="设置中文"><a href="#设置中文" class="headerlink" title="设置中文"></a>设置中文</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">language: zh-CN</span></pre></td></tr></table></figure>

<h2 id="设置Scheme"><a href="#设置Scheme" class="headerlink" title="设置Scheme"></a>设置Scheme</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> scheme: Muse    # 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白</span></pre></td></tr><tr><td class="code"><pre><span class="line"># scheme: Mist     # Muse 的紧凑版本，整洁有序的单栏外观</span></pre></td></tr><tr><td class="code"><pre><span class="line"># scheme: Pisces  # 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白</span></pre></td></tr><tr><td class="code"><pre><span class="line"># scheme: Gemini  # 类似 Pisces</span></pre></td></tr></table></figure>

<h2 id="设置菜单"><a href="#设置菜单" class="headerlink" title="设置菜单"></a>设置菜单</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 菜单示例配置</span></pre></td></tr><tr><td class="code"><pre><span class="line">menu:</span></pre></td></tr><tr><td class="code"><pre><span class="line">  home: &#x2F; || home</span></pre></td></tr><tr><td class="code"><pre><span class="line">  reading: &#x2F;reading&#x2F; || book</span></pre></td></tr><tr><td class="code"><pre><span class="line">  archives: &#x2F;archives&#x2F; || archive</span></pre></td></tr><tr><td class="code"><pre><span class="line">  categories: &#x2F;categories&#x2F; || th</span></pre></td></tr><tr><td class="code"><pre><span class="line">  #tags: &#x2F;tags&#x2F; || tags</span></pre></td></tr><tr><td class="code"><pre><span class="line">  about: &#x2F;about&#x2F; || user</span></pre></td></tr></table></figure>

<h2 id="音乐插件"><a href="#音乐插件" class="headerlink" title="音乐插件"></a>音乐插件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 网易云音乐插件 --&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line"> &lt;div id&#x3D;&quot;music163player&quot;&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">      &lt;iframe frameborder&#x3D;&quot;no&quot; border&#x3D;&quot;0&quot; marginwidth&#x3D;&quot;0&quot; marginheight&#x3D;&quot;0&quot; width&#x3D;280 height&#x3D;86 src&#x3D;&quot;&#x2F;&#x2F;music.163.com&#x2F;outchain&#x2F;player?type&#x3D;2&amp;id&#x3D;26090155&amp;auto&#x3D;1&amp;height&#x3D;66&quot;&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">      &lt;&#x2F;iframe&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;&#x2F;div&gt;</span></pre></td></tr></table></figure>
<h2 id="文章预览"><a href="#文章预览" class="headerlink" title="文章预览"></a>文章预览</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Automatically Excerpt. Not recommand.</span></pre></td></tr><tr><td class="code"><pre><span class="line"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></pre></td></tr><tr><td class="code"><pre><span class="line">auto_excerpt:</span></pre></td></tr><tr><td class="code"><pre><span class="line">  enable: false</span></pre></td></tr><tr><td class="code"><pre><span class="line">  length: 150</span></pre></td></tr></table></figure>



<h2 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 将头像放置主题目录下的 source&#x2F;uploads&#x2F; （新建uploads目录若不存在） 配置为：</span></pre></td></tr><tr><td class="code"><pre><span class="line">avatar: &#x2F;uploads&#x2F;avatar.png</span></pre></td></tr><tr><td class="code"><pre><span class="line"># 放置在 source&#x2F;images&#x2F; 目录下, 配置为：</span></pre></td></tr><tr><td class="code"><pre><span class="line">avatar: &#x2F;images&#x2F;avatar.png</span></pre></td></tr><tr><td class="code"><pre><span class="line"># 完整的互联网 URI</span></pre></td></tr><tr><td class="code"><pre><span class="line">avatar: </span></pre></td></tr><tr><td class="code"><pre><span class="line">   url: http:&#x2F;&#x2F;example.com&#x2F;avatar.png</span></pre></td></tr></table></figure>


<h2 id="头像旋转特效"><a href="#头像旋转特效" class="headerlink" title="头像旋转特效"></a>头像旋转特效</h2><p>themes\next\source\css_common\components\sidebar\sidebar-author.styl</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.site-author-image &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  margin: 0 auto;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  padding: $site-author-image-padding;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  max-width: $site-author-image-width;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  height: $site-author-image-height;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  border: $site-author-image-border-width solid $site-author-image-border-color;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">  border-radius: 50%;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -webkit-border-radius: 50%;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -moz-border-radius: 50%;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  transition: 1.4s all;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">.site-author-image:hover &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    -webkit-transform: rotate(360deg);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    -moz-transform: rotate(360deg);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    -ms-transform: rotate(360deg);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    -transform: rotate(360deg);</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">.site-author-name &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  margin: $site-author-name-margin;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  text-align: $site-author-name-align;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  color: $site-author-name-color;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  font-weight: $site-author-name-weight;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">.site-description &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  margin-top: $site-description-margin-top;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  text-align: $site-description-align;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  font-size: $site-description-font-size;</span></pre></td></tr><tr><td class="code"><pre><span class="line">  color: $site-description-color;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h2 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h2><p>npm install hexo-generator-searchdb –save</p>
<h2 id="看板娘"><a href="#看板娘" class="headerlink" title="看板娘"></a>看板娘</h2><p>next npm install –save hexo-helper-live2d</p>
<h1 id="进阶使用"><a href="#进阶使用" class="headerlink" title="进阶使用"></a>进阶使用</h1><h2 id="添加标签"><a href="#添加标签" class="headerlink" title="添加标签"></a>添加标签</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new page tags</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">title: 添加标签页面测试</span></pre></td></tr><tr><td class="code"><pre><span class="line">tags: Test  #添加标签</span></pre></td></tr><tr><td class="code"><pre><span class="line">categories: Test    #添加分类</span></pre></td></tr><tr><td class="code"><pre><span class="line">comments: false</span></pre></td></tr></table></figure>

<h1 id="博客备份"><a href="#博客备份" class="headerlink" title="博客备份"></a>博客备份</h1><p>利用github分支功能进行博客备份，思路说明:</p>
<ul>
<li>master分支：存放博客的静态网页(默认分支)。</li>
<li>hexo分支：存放Hexo博客的源码文件。</li>
</ul>
<h2 id="master分支"><a href="#master分支" class="headerlink" title="master分支"></a>master分支</h2><ul>
<li>修改更新博客内容并保存。</li>
<li>执行hexo clean清除本地旧代码。</li>
<li>执行hexo g -d生成静态网站并部署到GitHub的master分支上。</li>
</ul>
<p>进入站点配置文件编辑，搜索deploy：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deploy:</span></pre></td></tr><tr><td class="code"><pre><span class="line">  type: git</span></pre></td></tr><tr><td class="code"><pre><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;你的github用户名&#x2F;你的github用户名.github.io.git</span></pre></td></tr><tr><td class="code"><pre><span class="line">  branch: master</span></pre></td></tr></table></figure>

<h2 id="hexo-分支"><a href="#hexo-分支" class="headerlink" title="hexo 分支"></a>hexo 分支</h2><ul>
<li>hexo分支配置hexo分支，该分支为博客源码分支。</li>
<li>使用git clone -b hexo 你的github仓库路径， 拷贝源码仓库。</li>
<li>修改hexo主配置_config.xml的deploy部分配置，设置静态页面的发布分支为master。</li>
<li>添加.gitignore文件，将静态网页的目录及其他无需提交的源文件及目录排除掉。</li>
</ul>
<h3 id="分支设置"><a href="#分支设置" class="headerlink" title="分支设置"></a>分支设置</h3><ul>
<li>hexo分支，该分支为博客源码分支。</li>
<li>使用git clone -b hexo 你的github仓库路径， 拷贝源码仓库。</li>
<li>修改hexo主配置_config.xml的deploy部分配置，设置静态页面的发布分支为master。</li>
<li>添加.gitignore文件，将静态网页的目录及其他无需提交的源文件及目录排除掉。</li>
</ul>
<h3 id="博客源码更新"><a href="#博客源码更新" class="headerlink" title="博客源码更新"></a>博客源码更新</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout hexo</span></pre></td></tr><tr><td class="code"><pre><span class="line">git add .</span></pre></td></tr><tr><td class="code"><pre><span class="line">git commit -m &#39;Code update&#39;</span></pre></td></tr><tr><td class="code"><pre><span class="line">git push origin hexo</span></pre></td></tr></table></figure>


<h2 id="一键部署脚本"><a href="#一键部署脚本" class="headerlink" title="一键部署脚本"></a>一键部署脚本</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span></pre></td></tr><tr><td class="code"><pre><span class="line">DIR&#x3D;&#96;dirname $0&#96;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"># Generate blog</span></pre></td></tr><tr><td class="code"><pre><span class="line">hexo clean</span></pre></td></tr><tr><td class="code"><pre><span class="line">hexo generate</span></pre></td></tr><tr><td class="code"><pre><span class="line">sleep 5</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"># Deploy</span></pre></td></tr><tr><td class="code"><pre><span class="line">hexo deploy</span></pre></td></tr><tr><td class="code"><pre><span class="line">sleep 5</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"># Push hexo code</span></pre></td></tr><tr><td class="code"><pre><span class="line">git add .</span></pre></td></tr><tr><td class="code"><pre><span class="line">current_date&#x3D;&#96;date &quot;+%Y-%m-%d %H:%M:%S&quot;&#96;</span></pre></td></tr><tr><td class="code"><pre><span class="line">git commit -m &quot;Blog updated: $current_date&quot;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">sleep 2</span></pre></td></tr><tr><td class="code"><pre><span class="line">git push origin hexo</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">echo &quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;Finish!&lt;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2019/12/09/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
</search>
